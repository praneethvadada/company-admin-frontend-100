{"ast":null,"code":"import axios from 'axios';\nimport { cookieUtils } from '../utils/cookieUtils';\nconst API_BASE_URL = process.env.REACT_APP_API_URL || 'http://localhost:5001/api';\nconsole.log('üåê API Base URL:', API_BASE_URL);\nconst api = axios.create({\n  baseURL: API_BASE_URL,\n  headers: {\n    'Content-Type': 'application/json'\n  },\n  timeout: 10000 // 10 seconds timeout\n});\n\n// Request interceptor to add auth token and log requests\napi.interceptors.request.use(config => {\n  var _config$method;\n  console.log('üì§ API Request:', {\n    method: (_config$method = config.method) === null || _config$method === void 0 ? void 0 : _config$method.toUpperCase(),\n    url: config.url,\n    baseURL: config.baseURL,\n    fullURL: `${config.baseURL}${config.url}`,\n    headers: config.headers,\n    data: config.data\n  });\n\n  // Get token from cookies\n  const token = cookieUtils.getToken();\n  if (token) {\n    config.headers.Authorization = `Bearer ${token}`;\n    console.log('üîë Added Authorization header from cookies');\n  } else {\n    console.log('‚ö†Ô∏è No auth token found in cookies');\n  }\n  return config;\n}, error => {\n  console.error('‚ùå API Request Error:', error);\n  return Promise.reject(error);\n});\n\n// Response interceptor to handle auth errors and log responses\napi.interceptors.response.use(response => {\n  console.log('üì• API Response Success:', {\n    status: response.status,\n    statusText: response.statusText,\n    url: response.config.url,\n    headers: response.headers,\n    data: response.data,\n    dataType: typeof response.data,\n    dataKeys: typeof response.data === 'object' ? Object.keys(response.data) : 'Not an object'\n  });\n  return response;\n}, error => {\n  var _error$response, _error$response2, _error$config, _error$response3, _error$response4;\n  console.error('‚ùå API Response Error:', {\n    status: (_error$response = error.response) === null || _error$response === void 0 ? void 0 : _error$response.status,\n    statusText: (_error$response2 = error.response) === null || _error$response2 === void 0 ? void 0 : _error$response2.statusText,\n    url: (_error$config = error.config) === null || _error$config === void 0 ? void 0 : _error$config.url,\n    message: error.message,\n    data: (_error$response3 = error.response) === null || _error$response3 === void 0 ? void 0 : _error$response3.data\n  });\n  if (((_error$response4 = error.response) === null || _error$response4 === void 0 ? void 0 : _error$response4.status) === 401) {\n    console.log('üö® 401 Unauthorized - Clearing auth data and redirecting to login');\n    cookieUtils.clearAuth();\n\n    // Only redirect if not already on login page\n    if (window.location.pathname !== '/login') {\n      window.location.href = '/login';\n    }\n  }\n  return Promise.reject(error);\n});\nexport default api;","map":{"version":3,"names":["axios","cookieUtils","API_BASE_URL","process","env","REACT_APP_API_URL","console","log","api","create","baseURL","headers","timeout","interceptors","request","use","config","_config$method","method","toUpperCase","url","fullURL","data","token","getToken","Authorization","error","Promise","reject","response","status","statusText","dataType","dataKeys","Object","keys","_error$response","_error$response2","_error$config","_error$response3","_error$response4","message","clearAuth","window","location","pathname","href"],"sources":["/Users/praneeth/Desktop/Project100/frontend100/adminpanel100/src/services/api.js"],"sourcesContent":["import axios from 'axios';\nimport { cookieUtils } from '../utils/cookieUtils';\n\nconst API_BASE_URL = process.env.REACT_APP_API_URL || 'http://localhost:5001/api';\n\nconsole.log('üåê API Base URL:', API_BASE_URL);\n\nconst api = axios.create({\n  baseURL: API_BASE_URL,\n  headers: {\n    'Content-Type': 'application/json',\n  },\n  timeout: 10000, // 10 seconds timeout\n});\n\n// Request interceptor to add auth token and log requests\napi.interceptors.request.use(\n  (config) => {\n    console.log('üì§ API Request:', {\n      method: config.method?.toUpperCase(),\n      url: config.url,\n      baseURL: config.baseURL,\n      fullURL: `${config.baseURL}${config.url}`,\n      headers: config.headers,\n      data: config.data\n    });\n    \n    // Get token from cookies\n    const token = cookieUtils.getToken();\n    if (token) {\n      config.headers.Authorization = `Bearer ${token}`;\n      console.log('üîë Added Authorization header from cookies');\n    } else {\n      console.log('‚ö†Ô∏è No auth token found in cookies');\n    }\n    \n    return config;\n  },\n  (error) => {\n    console.error('‚ùå API Request Error:', error);\n    return Promise.reject(error);\n  }\n);\n\n// Response interceptor to handle auth errors and log responses\napi.interceptors.response.use(\n  (response) => {\n    console.log('üì• API Response Success:', {\n      status: response.status,\n      statusText: response.statusText,\n      url: response.config.url,\n      headers: response.headers,\n      data: response.data,\n      dataType: typeof response.data,\n      dataKeys: typeof response.data === 'object' ? Object.keys(response.data) : 'Not an object'\n    });\n    return response;\n  },\n  (error) => {\n    console.error('‚ùå API Response Error:', {\n      status: error.response?.status,\n      statusText: error.response?.statusText,\n      url: error.config?.url,\n      message: error.message,\n      data: error.response?.data\n    });\n    \n    if (error.response?.status === 401) {\n      console.log('üö® 401 Unauthorized - Clearing auth data and redirecting to login');\n      cookieUtils.clearAuth();\n      \n      // Only redirect if not already on login page\n      if (window.location.pathname !== '/login') {\n        window.location.href = '/login';\n      }\n    }\n    \n    return Promise.reject(error);\n  }\n);\n\nexport default api;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}